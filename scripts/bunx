#!/usr/bin/env sh

# Workspace shim: prefer Bun's built-in `bun x` over any broken/third-party `bunx` shims.
#
# Usage:
#   bunx <pkg> [args...]
#   bunx --bun <pkg> [args...]
#
# Notes:
# - `bun x` is the canonical Bun subcommand for bunx-style execution.
# - If the user passes `--bun`, Bun's `bun x` already implies Bun execution, so we drop it.

set -eu

if [ "${1-}" = "--bun" ]; then
  shift
fi

if [ -x "$HOME/.bun/bin/bun" ]; then
  exec "$HOME/.bun/bin/bun" x "$@"
fi

exec bun x "$@"
